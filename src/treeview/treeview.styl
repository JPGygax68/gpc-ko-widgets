// TODO: move this into separate stylesheet

.gpc-ko-widget {
  font-family: Arial, Sans-Serif;
}

.gpc-ko-widget.treeview {

  display: inline-block;

  padding: 0.5em;
  
  ul.children {
    margin: 0;
    padding: 0;
    > li {
      list-style-type: none;
      margin-left: 0; // if the root node is not displayed (only its children), there is no indent
    }
  }
  
  .node {
  }
  
  .node > .header {

    //display: inline-block;
    
    * {
      vertical-align: baseline;
    }
    
    > * {
      //display: table-cell;
      box-sizing: border-box;
      display: inline-block;
    }
    
    //line-height: 94%; // determined experimentally: this reduces interline to a minimum while leaving letters ('g') intact
      
    .main {
    
      //overflow: hidden;
      text-overflow: ellipsis;
      //vertical-align: baseline;
      
      > * {
        display: inline-block;
        vertical-align: baseline;
      }
      
      > *:not(:first-child) {
        margin-left: 4px; // TODO: inline styling (property-controlled?)
      }
      
      > .handle {
        position: relative;
        top: -1px;
        width: 11px;
        height: 11px;
        //vertical-align: top;
        background-repeat: no-repeat;
        user-select: none;
      }

      > .label {
        //text-overflow: ellipsis;
        //overflow: hidden;
        padding: 1px 2px;
      }
      
      .label {
        &:first-child { margin-left: 0; }
      }
    
    }
    
    > .value {
      //padding: 1px 2px;
    }
    
    :not(:first-child) {
      margin-left: 0.15em;
    }
  }
  
  .node > .children {
    margin-left: 15px;
  }

  .node {
    // TODO: generate those in a loop ?
    &.level0 > .header > .main > .label { width: 200px; &:not(:first-child) { width: 185px; } }
    &.level1 > .header > .main > .label { width: 185px; &:not(:first-child) { width: 170px; } }
    &.level2 > .header > .main > .label { width: 170px; &:not(:first-child) { width: 155px; } }
    &.level3 > .header > .main > .label { width: 155px; &:not(:first-child) { width: 140px; } }
    &.level4 > .header > .main > .label { width: 140px; &:not(:first-child) { width: 125px; } }
    &.level5 > .header > .main > .label { width: 125px; &:not(:first-child) { width: 100px; } }
    &.level6 > .header > .main > .label { width: 125px; &:not(:first-child) { width: 100px; } }
    &.level7 > .header > .main > .label { width: 125px; &:not(:first-child) { width: 100px; } }
    &.level8 > .header > .main > .label { width: 125px; &:not(:first-child) { width: 100px; } }
    &.level9 > .header > .main > .label { width: 125px; &:not(:first-child) { width: 100px; } }
  }
  
  // A node not explicitly marked as a "leaf" will have a "handle"
  
  .node.open {
    > .header > .main > .handle {
      background-image: url('minus.png');
    }
    > .children {
      display: block;
    }
  }
  .node.closed {
    > .header > .main > .handle {
      background-image: url('plus.png');
    }
    > .children {
      display: none;
    }
  }
  
}
 
// DEBUGGING -------------------
  
if (false)

  .gpc-ko-widget.treeview {

    background-color: orange;
    
    .node {
      background-color: rgba(0, 100, 255, 0.5);
    }
  }

.gpc-ko-widget.treeview {

  .node > .header {
    > .main > .label { background-color: orange; }
    > .value { background-color: lime; }
  }
}
